---
import Layout from '../../layouts/Layout.astro';
import HeaderClient from "../../components/HeaderClient.jsx";
import Footer from "../../components/Footer.jsx";
import ProjectsClient from "../../components/ProjectsClient.jsx";
import { getProjects, getLandingBlocks, getSystemStyles } from "../../lib/notion.js";

const styles = await getSystemStyles();
const projects = await getProjects();
const blocks = await getLandingBlocks();
const projectsBlock = blocks.find((b: { componentName: string }) => b.componentName === 'Projects');
const title = projectsBlock?.title || 'Karya & Project Kami';
const subtitle = projectsBlock?.subtitle || 'Jelajahi berbagai solusi digital yang telah kami bangun untuk mendongkrak visibilitas bisnis klien kami.';
---

<Layout title="Project & Portfolio - Kris" description="Lihat bagaimana kami membantu bisnis lain berkembang secara digital melalui web dan optimasi.">
    <div class="min-h-screen bg-slate-50">
        <HeaderClient styles={styles} client:load />
        <main class="pt-28 pb-20 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h1 class="text-4xl md:text-5xl font-extrabold text-slate-900 mb-6">
                    {title}
                </h1>
                <p class="text-xl text-gray-600 max-w-2xl mx-auto">
                    {subtitle}
                </p>
            </div>

            <ProjectsClient initialProjects={projects} client:load />
        </main>
        <Footer />
    </div>
</Layout>
