---
import '../index.css';
import { getSystemStyles } from '../lib/notion';

interface Props {
	title?: string;
	description?: string;
}

const { title: propTitle, description: propDescription } = Astro.props;

const styles = await getSystemStyles();

// Create inline CSS variables based on Notion configuration
const cssVars = {
	'--color-primary': styles.primary_color?.value || '#2563EB',
	'--color-dark': styles.dark_mode_color?.value || '#0F172A',
};

const finalTitle = propTitle || styles.site_name?.value || 'Kris - Bikin Bisnis Lebih Laris dengan Website Otomatis';
const finalDescription = propDescription || styles.site_description?.value || 'Bikin Bisnis Lebih Laris dengan Website Otomatis';
const styleString = Object.entries(cssVars).map(([k, v]) => `${k}:${v}`).join(';');
---

<!doctype html>
<html lang="id">
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content={finalDescription} />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.ico" />
		<title>{finalTitle}</title>
        <style is:global>
            @keyframes float-container {
                0%, 100% { transform: translateY(0); }
                50% { transform: translateY(-15px); }
            }
            .perspective-\[1000px\] { perspective: 1000px; }
            .transform-style-3d { transform-style: preserve-3d; }
            .-rotate-y-\[15deg\] { transform: rotateY(-15deg); }
            .rotate-y-\[5deg\] { transform: rotateY(5deg); }
            .rotate-y-\[15deg\] { transform: rotateY(15deg); }
            .-translate-z-10 { transform: translateZ(-40px); }
            .translate-z-10 { transform: translateZ(40px); }
            .-translate-z-5 { transform: translateZ(-20px); }
        </style>
	</head>
	<body style={styleString} class="relative min-h-screen">
		{/* Global Animated Background Gradients */}
		<div class="fixed inset-0 overflow-hidden pointer-events-none z-0 bg-slate-50">
			<div class="absolute -top-[20%] -right-[10%] w-[70%] h-[70vh] bg-blue-300 rounded-full mix-blend-multiply filter blur-[120px] opacity-20 animate-blob"></div>
			<div class="absolute top-[20%] -left-[10%] w-[60%] h-[60vh] bg-indigo-300 rounded-full mix-blend-multiply filter blur-[120px] opacity-20 animate-blob animation-delay-2000"></div>
		</div>

		{/* Main Content */}
		<main class="relative z-10">
			<slot />
		</main>
	</body>
</html>
