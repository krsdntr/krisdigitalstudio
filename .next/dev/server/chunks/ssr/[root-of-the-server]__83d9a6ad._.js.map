{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///D:/app/KrisDigital%20Studio/src/lib/notion.js"],"sourcesContent":["import { Client } from '@notionhq/client';\r\nimport { NotionToMarkdown } from 'notion-to-md';\r\nimport { cache } from 'react';\r\n\r\nconst notion = new Client({\r\n    auth: process.env.NOTION_SECRET,\r\n});\r\n\r\nconst n2m = new NotionToMarkdown({ notionClient: notion });\r\n\r\n// Helper to safely extract Notion properties\r\nconst getPlainText = (property) => property?.rich_text?.[0]?.plain_text || property?.title?.[0]?.plain_text || '';\r\nconst getSelectName = (property) => property?.select?.name || '';\r\nconst getMultiSelectNames = (property) => property?.multi_select?.map(item => item.name) || [];\r\nconst getDateStr = (property) => property?.date?.start || '';\r\nconst getUrl = (property) => {\r\n    let url = property?.url || '';\r\n    if (url && !url.startsWith('http://') && !url.startsWith('https://') && !url.startsWith('mailto:') && !url.startsWith('tel:')) {\r\n        url = 'https://' + url;\r\n    }\r\n    return url;\r\n};\r\nconst getNumber = (property) => property?.number || 0;\r\nconst getCheckbox = (property) => property?.checkbox || false;\r\nconst getCoverUrl = (item) => item.cover?.external?.url || item.cover?.file?.url || '';\r\nconst getFileUrl = (property) => property?.files?.[0]?.file?.url || property?.files?.[0]?.external?.url || '';\r\n\r\n// 1. Fetch System Styles\r\nexport const getSystemStyles = cache(async () => {\r\n    const databaseId = process.env.NOTION_STYLES_DATABASE_ID;\r\n    if (!databaseId) return {};\r\n\r\n    try {\r\n        const response = await notion.databases.query({\r\n            database_id: databaseId,\r\n            filter: {\r\n                property: 'Status',\r\n                status: {\r\n                    equals: 'Done',\r\n                },\r\n            },\r\n        });\r\n\r\n        const styles = {};\r\n        response.results.forEach((item) => {\r\n            const key = getPlainText(item.properties.Key);\r\n            const value = getPlainText(item.properties.Value);\r\n            const type = getSelectName(item.properties.Type);\r\n\r\n            if (key) {\r\n                styles[key] = { value, type };\r\n            }\r\n        });\r\n\r\n        return styles;\r\n    } catch (error) {\r\n        console.error(`Error fetching System Styles:`, error.message || error, error.cause || '');\r\n        return {};\r\n    }\r\n});\r\n\r\n// 2. Fetch Landing Page Blocks\r\nexport const getLandingBlocks = cache(async () => {\r\n    const databaseId = process.env.NOTION_LANDING_DATABASE_ID;\r\n    if (!databaseId) return [];\r\n\r\n    try {\r\n        const response = await notion.databases.query({\r\n            database_id: databaseId,\r\n            filter: {\r\n                property: 'Status',\r\n                status: {\r\n                    equals: 'Done',\r\n                },\r\n            },\r\n            sorts: [\r\n                {\r\n                    property: 'Order ID',\r\n                    direction: 'ascending',\r\n                },\r\n            ],\r\n        });\r\n\r\n        return response.results.map((item) => ({\r\n            id: item.id,\r\n            name: getPlainText(item.properties.Name),\r\n            componentName: getPlainText(item.properties['Component Name']) || getSelectName(item.properties['Component Name']),\r\n            orderId: getNumber(item.properties['Order ID']),\r\n            title: getPlainText(item.properties.Title),\r\n            subtitle: getPlainText(item.properties['Subtitle/Content']),\r\n            media: getFileUrl(item.properties['Media/Image']),\r\n            ctaText: getPlainText(item.properties['Call to Action Text']),\r\n            ctaLink: getUrl(item.properties['Call to Action Link']),\r\n            secondaryCtaText: getPlainText(item.properties['Secondary CTA Text']),\r\n            secondaryCtaLink: getUrl(item.properties['Secondary CTA Link']),\r\n            checklists: getPlainText(item.properties['Checklist Items'])\r\n        }));\r\n    } catch (error) {\r\n        console.error(`Error fetching Landing Page Blocks:`, error.message || error, error.cause || '');\r\n        return [];\r\n    }\r\n});\r\n\r\n// 3/4/5. Generic Fetch Content Items (Blog, Project, Products)\r\nexport const getPublishedItems = cache(async (databaseId, customMapper = null) => {\r\n    if (!databaseId) return [];\r\n    try {\r\n        const response = await notion.databases.query({\r\n            database_id: databaseId,\r\n            filter: {\r\n                property: 'Status',\r\n                status: {\r\n                    equals: 'Done',\r\n                },\r\n            },\r\n            sorts: [\r\n                {\r\n                    timestamp: 'created_time',\r\n                    direction: 'descending',\r\n                },\r\n            ],\r\n        });\r\n\r\n        return response.results.map((item) => {\r\n            // Base mapper\r\n            const baseObj = {\r\n                id: item.id,\r\n                title: getPlainText(item.properties.Name || item.properties.Title || item.properties['Project Name'] || item.properties['Product Name']),\r\n                slug: getPlainText(item.properties.Slug),\r\n                cover: getCoverUrl(item) || getFileUrl(item.properties.Thumbnail),\r\n            };\r\n\r\n            // Apply custom mapping if provided, otherwise return base\r\n            return customMapper ? { ...baseObj, ...customMapper(item) } : baseObj;\r\n        });\r\n    } catch (error) {\r\n        console.error(`Error fetching from database ${databaseId}:`, error);\r\n        return [];\r\n    }\r\n});\r\n\r\n// Specific Mappers for the 3 Content Types\r\nexport const getBlogPosts = async () => {\r\n    return getPublishedItems(process.env.NOTION_BLOG_DATABASE_ID, (item) => ({\r\n        date: getDateStr(item.properties['Published Date']),\r\n        category: getSelectName(item.properties.Category),\r\n        tags: getMultiSelectNames(item.properties.Tags),\r\n        excerpt: getPlainText(item.properties.Excerpt),\r\n        featured: getCheckbox(item.properties.Featured),\r\n    }));\r\n};\r\n\r\nexport const getProjects = async () => {\r\n    return getPublishedItems(process.env.NOTION_PROJECT_DATABASE_ID, (item) => ({\r\n        date: getDateStr(item.properties['Completion Date']),\r\n        industry: getSelectName(item.properties.Industry),\r\n        techStack: getMultiSelectNames(item.properties['Tech Stack']),\r\n        liveUrl: getUrl(item.properties['Live URL']),\r\n        description: getPlainText(item.properties['Short Description']),\r\n    }));\r\n};\r\n\r\nexport const getDigitalProducts = async () => {\r\n    return getPublishedItems(process.env.NOTION_PRODUCT_DATABASE_ID, (item) => ({\r\n        price: getNumber(item.properties.Price),\r\n        discountPrice: getNumber(item.properties['Discount Price']),\r\n        productType: getSelectName(item.properties['Product Type']),\r\n        description: getPlainText(item.properties['Short Desc']),\r\n        features: getMultiSelectNames(item.properties.Features),\r\n        checkoutUrl: getUrl(item.properties['Checkout URL']),\r\n        isFreebie: getCheckbox(item.properties['Is Freebie?']),\r\n    }));\r\n};\r\n\r\n// Generic Fetch Single Item Details (for dynamic routes)\r\nexport const getItemDetails = cache(async (slug, databaseId) => {\r\n    if (!databaseId) return null;\r\n    try {\r\n        const response = await notion.databases.query({\r\n            database_id: databaseId,\r\n            filter: {\r\n                property: 'Slug',\r\n                rich_text: {\r\n                    equals: slug,\r\n                },\r\n            },\r\n        });\r\n\r\n        const item = response.results[0];\r\n        if (!item) return null;\r\n\r\n        const title = getPlainText(item.properties.Name || item.properties.Title || item.properties['Project Name'] || item.properties['Product Name']);\r\n        const mdBlocks = await n2m.pageToMarkdown(item.id);\r\n        const content = n2m.toMarkdownString(mdBlocks);\r\n\r\n        // Provide a generic object that pages can interpret\r\n        return {\r\n            rawItem: item, // In case page needs specific properties\r\n            id: item.id,\r\n            title,\r\n            content: typeof content === 'string' ? content : (content?.parent || ''),\r\n            cover: getCoverUrl(item) || getFileUrl(item.properties.Thumbnail),\r\n            slug\r\n        };\r\n    } catch (error) {\r\n        console.error(`Error fetching details for slug ${slug}:`, error);\r\n        return null;\r\n    }\r\n});\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 254, "column": 0}, "map": {"version":3,"sources":["file:///D:/app/KrisDigital%20Studio/src/app/layout.jsx"],"sourcesContent":["import '../index.css';\r\nimport { getSystemStyles } from '../lib/notion';\r\n\r\nexport const metadata = {\r\n  title: 'Kris',\r\n  description: 'Bikin Bisnis Lebih Laris dengan Website Otomatis',\r\n};\r\n\r\nexport const revalidate = 3600; // Cache system styles for 1 hour\r\n\r\nexport default async function RootLayout({ children }) {\r\n  const styles = await getSystemStyles();\r\n\r\n  // Create inline CSS variables based on Notion configuration\r\n  const cssVars = {\r\n    '--color-primary': styles.primary_color?.value || '#2563EB',\r\n    '--color-dark': styles.dark_mode_color?.value || '#0F172A',\r\n  };\r\n\r\n  // Override metadata if strictly defined in Notion\r\n  if (styles.site_name) metadata.title = styles.site_name.value;\r\n  if (styles.site_description) metadata.description = styles.site_description.value;\r\n\r\n  return (\r\n    <html lang=\"id\">\r\n      <body style={cssVars} className=\"relative min-h-screen\">\r\n        {/* Global Animated Background Gradients */}\r\n        <div className=\"fixed inset-0 overflow-hidden pointer-events-none z-0 bg-slate-50\">\r\n          <div className=\"absolute -top-[20%] -right-[10%] w-[70%] h-[70vh] bg-blue-300 rounded-full mix-blend-multiply filter blur-[120px] opacity-20 animate-blob\"></div>\r\n          <div className=\"absolute top-[20%] -left-[10%] w-[60%] h-[60vh] bg-indigo-300 rounded-full mix-blend-multiply filter blur-[120px] opacity-20 animate-blob animation-delay-2000\"></div>\r\n        </div>\r\n\r\n        {/* Main Content */}\r\n        <main className=\"relative z-10\">\r\n          {children}\r\n        </main>\r\n\r\n      </body>\r\n    </html>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;AACA;;;;AAEO,MAAM,WAAW;IACtB,OAAO;IACP,aAAa;AACf;AAEO,MAAM,aAAa,MAAM,iCAAiC;AAElD,eAAe,WAAW,EAAE,QAAQ,EAAE;IACnD,MAAM,SAAS,MAAM,IAAA,uIAAe;IAEpC,4DAA4D;IAC5D,MAAM,UAAU;QACd,mBAAmB,OAAO,aAAa,EAAE,SAAS;QAClD,gBAAgB,OAAO,eAAe,EAAE,SAAS;IACnD;IAEA,kDAAkD;IAClD,IAAI,OAAO,SAAS,EAAE,SAAS,KAAK,GAAG,OAAO,SAAS,CAAC,KAAK;IAC7D,IAAI,OAAO,gBAAgB,EAAE,SAAS,WAAW,GAAG,OAAO,gBAAgB,CAAC,KAAK;IAEjF,qBACE,8OAAC;QAAK,MAAK;kBACT,cAAA,8OAAC;YAAK,OAAO;YAAS,WAAU;;8BAE9B,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;;;;;sCACf,8OAAC;4BAAI,WAAU;;;;;;;;;;;;8BAIjB,8OAAC;oBAAK,WAAU;8BACb;;;;;;;;;;;;;;;;;AAMX"}}]
}